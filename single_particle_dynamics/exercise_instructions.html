<!DOCTYPE html>
<html>



<head>
	<title>Single particle dynamics GUI</title>
</head>



<body >
	<h1><span>Single particle dynamics GUI</span></h1>


<ul>
<li class="toclevel-1 tocsection-1"><a href="#Background"><span class="tocnumber">1</span> <span class="toctext">Background</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Exercises"><span class="tocnumber">2</span> <span class="toctext">Exercises</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Exercise_1:_single_cell_behavior"><span class="tocnumber">2.1</span> <span class="toctext">Exercise 1: single cell behavior</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Exercise_2:_Fixed_initial_conditions"><span class="tocnumber">2.2</span> <span class="toctext">Exercise 2: Fixed initial conditions</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Exercise_3:_cell-to-cell_behavior"><span class="tocnumber">2.3</span> <span class="toctext">Exercise 3: cell-to-cell behavior</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Exercise_4:_Importance_of_initial_conditions"><span class="tocnumber">2.4</span> <span class="toctext">Exercise 4: Importance of initial conditions</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Continued_exploration"><span class="tocnumber">2.5</span> <span class="toctext">Continued exploration</span></a></li>
</ul>
</li>
</ul>
</div>


<h2>Background</h2>

<p>This article is intended to provide a series of self-guided exercises for the Single Particle Dynamics GUI. The GUI is built to visualize the propagation of single particles through FODO lattices. It generates animations for the a particle's trajectory through a lattice, as well as its evolution in phase-space. Users are given control over the particle's initial conditions, the focal length of the quadrupoles, the drift length between quadrupoles, and the total number of cells. Currently, the GUI can be launched from LCLSHome &gt; User Dev &gt; Tom's button. 
</p><p><br />
You are encouraged to explore how each parameter affects the single particle dynamics. To facilitate this, there are several exercises built around the GUI. Instructions for each exercise are provided below with guiding questions and answers. Use the different tab buttons on the GUI to configure the controls for each exercise appropriately. The exercises are written for an early career operator with a basic understanding of drifts, quadrupoles, and transfer matrices. They emphasis qualitative observations, but many ideas introduced here can be connected to more advanced concepts. 
</p><p><br />
Underneath the hood, the GUI uses transfer matrices to propagate the particle's initial condition through each lattice element - starting with a focusing quad and using the thin-lens approximation. Note that the animation alots equal time for each lattice element, meaning the particle will appear to take the same amount of time to pass through the drift spaces as it does to pass through the quadrupoles. This is done to emphasis the effect of each element in phase space, but results in the trajectory plot appearing to pause at each quadrupole. A real-world observer would instead see particles instantaneous passing through thin quadrupoles.
</p>





<h2>Exercises</h2>


<h4>Exercise 1: single cell behavior</h4>

<p>In this exercise, you are provided with a single cell of a predetermined FODO lattice and given control over initial conditions of a particle traveling through that cell. The goal is to simply get a feel for the motion of particles in a FODO lattice. 

</p><p>Using the input boxes for <i>x</i> and <i>x'</i>, use the <i>run</i> button to see how that particle moves through the cell. Run the animation a few more times using different initial conditions. The plots will naturally retain the history of previous runs to help you compare different scenarios, but you can clear the plots at any time using the <i>clear</i> button.

</p>
<pre>Qualitatively, what can you say about the motion of particles in phase space?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>The particle undergoes some piece-wise, linear motion in phase space. On the phase space plot, horizontal lines correspond to motion through the drift spaces while vertical lines correspond to motion through the quadrupoles. 
</p>
</div>
<pre>Looking at the trajectory plot, can you find the <i>s</i>> location of the defocusing quadrupole? 
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p><i>s=10</i>. The defocusing quad pushes particles away from its magnetic center in the <i>x</i> plane.
</p>
</div>
<pre>Can you find some special initial conditions with unique behavior?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>The trivial case is (<i>x</i>, <i>x'</i>) = (0, 0). This passes through the magnetic center of both quads; in phase space, this particle stays at the origin. There are other interesting cases when the particle passes through the magnetic center of the defocusing quad. 
</p>
</div>
<h4><span class="mw-headline" id="Exercise_2:_Fixed_initial_conditions">Exercise 2: Fixed initial conditions</span></span></h4>
<p>In this exercise, you are provided with fixed initial conditions but are given control over all the lattice parameters. The goal is to get a feel for how different lattices affect the same particle. Try adjusting each parameter separately to see how they affect the particle dynamics.
</p>
<pre>What happens to the particle trajectory as the focal length becomes much longer than the drift length? 
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>You should see a sinusoidal oscillation take form over many cells; this is characteristic of a weakly focusing lattice. Note that the cell-to-cell motion is still piece-wise linear. 
</p><p><br/>
Informally, operators would likely call this kind of feature on an orbit display a betatron oscillation. While the underlying principles for this oscillation are the same, be mindful that the orbit display show the behavior of a multi-particle system while this GUI show single particles.
</p>
</div>
<pre>What happens to the particle trajectory if the focal length becomes too short? Be mindful of the scale on your axes, you may want to only use a small number of cells.
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Over-focused lattices cause unstable oscillations in the orbit - the position error grows exponentially.
</p>
</div>
<pre>Can you find the boundary between stable and unstable orbits?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>The boundary occurs when the focal length is half of the drift length. At this point, the position error grows linearly. Compare the behavior for lattices just a small fraction above and below this threshold.
</p>
</div>
<pre>What do you think would change if you could make the focal length negative?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Using a negative focal length exchanges the focusing and defocusing quadrupoles.
</p>
</div>
<h4><span class="mw-headline" id="Exercise_3:_cell-to-cell_behavior">Exercise 3: cell-to-cell behavior</span></span></h4>
<p>The only change for this exercise is that the animations add markers to every point that corresponds to the entrance of every focusing quad in the lattice. This is done to highlight the cell-to-cell behavior of the particle. Again, try adjusting each parameter separately to see how they affect the cell-to-cell behavior.
</p>
<pre>Qualitatively, what is the cell-to-cell phase space behavior of a particle through a FODO lattice?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Cell-to-cell, the single particle traces out an ellipse.
</p>
</div>
<pre>Does the cell-to-cell behavior depend on the lattice?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Yes, different lattices will cause the particle to trace out different ellipses.
</p>
</div>
<p><br />
For stable lattices, the cell-to-cell motion of a particle is periodic. One full cycle around the ellipse represents 360deg of phase in that oscillation. The phase advance of a lattice quantifies how much progress in that oscillation a particle makes across a single cell of the lattice. 
</p><p><br />
</p>
<pre>Roughly speaking, what is the phase advance of a lattice with a drift length of 10 and a focal length of 16?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>After 10 cells, the particle almost returns to its initial conditions, meaning the amount of phase advanced per cell is roughly 36deg. Because the particle slightly overshoots, we can say that the phase advance must be slightly greater. 
</p>
</div>
<pre>What happens to the phase advance as the focal length increases relative to the drift length?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>With a longer focal length, the particle needs more cells to complete a full oscillation so the phase advance decreased.
</p>
</div>
<h4><span class="mw-headline" id="Exercise_4:_Importance_of_initial_conditions">Exercise 4: Importance of initial conditions</span></h4>
<p>For this exercise, the animation will continue to highlight the cell-to-cell behavior. This time, the lattice is fixed but you have control over the particle's initial conditions. You are also given an additional control to choose where the cell-to-cell behavior is defined from. Start by running the animation for several particles with different initial conditions.
</p>
<pre>How do the initial conditions affect the phase space ellipse?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>While different initial conditions will trace out ellipses of different sizes, it's important to recognize that the shape and orientation is unaffected; these properties are uniquely determined by the lattice.
</p><p><br />
The initial conditions also determine the initial phase of the particle's cell-to-cell oscillation. In other words, they determine which point of the ellipse the particle starts on.
</p>
</div>
<pre>Adjust the slider such that the cell-to-cell behavior is now define from the center of the defocusing quad. How does this affect the phase space ellipse?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Watch as you step the slider over until you reach the center of the defocusing quad. You should see a continuous transformation of the phase space ellipse; this hints that the transfer matrices can also describe the transformation of the phase space ellipse. Note that the area of the ellipse is conserved during the transformation.
</p>
</div>
<pre>How would you describe the transformation of the phase space ellipse across a drift space?
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Drift spaces <i>shear</i> the phase space ellipse. To see this, step the slider from the start to end of one of the drift spaces. 
</p>
</div>
<h4><span class="mw-headline" id="Continued_exploration">Continued exploration</span></h4>
<p>The sandbox version of this GUI gives you unrestricted access to every parameter, plus control over the animation speed. It also includes a <i>continue</i> button which will let you use the output of your previous run as initial conditions for a subsequent animation. This means that you can explore the dynamics of a particle passing through several different lattices.
</p>


</body>
</html>